@model IEnumerable<Homework6.Models.Person>

@{
    ViewBag.Title = "Customer Search";
}

<br />
<img id="banner" src="~/Content/wideworldimporters.png" alt="Alternate Text" />
<br />

<div class="col-lg-10">
    <h2>Customer Search</h2>
    <div class="row">
        <!-- Razor to pass the search to the controller-->
        @using (Html.BeginForm("Customer", "Home", FormMethod.Get))
        {            
            <div>
                <!-- The text field -->
                @Html.TextBox("Search", "", new { @class = "form-control", placeholder = "Customer Search", required = "required" })
                <button class="btn btn-primary" type="submit">Search</button>
            </div>

            <br />

            <!-- This is what is returned after the search -->
            if (ViewBag.Customer)
            {
                <!-- If nothing was matched -->
                if (Model.Count() == 0)
                {
                    <h2 style="color: crimson"> Sorry no customers found.</h2>
                }
                else
                {
                    <div><h3>Customer:</h3></div><br />
                    <!-- This is to pass what is returned if a customer is found -->
                    foreach (var person in Model)
                    {
                        <div>
                            <!-- This passes the searched name to the Details action method, with the ID -->
                            <a class="text-info" href="Home/Details/@person.PersonID" role="button">@person.FullName (@person.PreferredName)</a>
                        </div>
                    }
                }
            }
        }
    </div>
</div>